(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{56:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(25),i=n.n(a),s=n(13),l=n(5),o=n.n(l),u=n(7),j=n(2),b=n(26),h=n.n(b),d=n(4),O=n.n(d),g=location.origin,x=function(e,t,n,c,r){var a=r.gender,i=r.race,s=r.ethnicity,l=r.age_min,o=r.age_max,u=r.death,j=!0===c?-1:1;return O.a.get("".concat(g,"/patient?length=").concat(e,"&page=").concat(t-1).concat(n?"&order_column="+n:"").concat(c?"&order_desc="+j:"").concat(a?"&gender="+a:"").concat(0!==i.length?"&race="+i:"").concat(s?"&ethnicity="+s:"").concat(l?"&age_min="+l:"").concat(o?"&age_max="+o:"").concat(u?"&death="+u:"")).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},f=function(e){return O.a.get("".concat(g,"/patient/").concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},p=(n(56),n(0)),m=Object(c.createContext)(),v=function(e){var t=e.children;Object(c.useEffect)((function(){ee()}),[]);var n=Object(c.useState)(1),r=Object(j.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(10),l=Object(j.a)(s,2),b=l[0],h=l[1],d=Object(c.useState)(null),x=Object(j.a)(d,2),f=x[0],v=x[1],y=Object(c.useState)(null),S=Object(j.a)(y,2),P=S[0],k=S[1],_=Object(c.useState)(null),C=Object(j.a)(_,2),w=C[0],I=C[1],L=Object(c.useState)(10),D=Object(j.a)(L,2),F=D[0],N=D[1],A=Object(c.useState)(0),E=Object(j.a)(A,2),T=E[0],Y=E[1],M=Object(c.useState)({gender:"",race:[],ethnicity:"",age_min:"",age_max:"",death:""}),G=Object(j.a)(M,2),B=G[0],J=G[1],R=Object(c.useState)(null),q=Object(j.a)(R,2),z=q[0],H=q[1],K=Object(c.useState)(null),Q=Object(j.a)(K,2),U=Q[0],V=Q[1],W=Object(c.useState)(null),X=Object(j.a)(W,2),Z=X[0],$=X[1],ee=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){var t=[];return e.map((function(e,n){return t.push({key:n+1,value:e})})),t},e.next=3,Promise.all([O.a.get("".concat(g,"/list/gender")).then((function(e){return e.data})).catch((function(e){return console.log(e)})).then((function(e){return t(e)})).then((function(e){return H(e)})),O.a.get("".concat(g,"/list/race")).then((function(e){return e.data})).catch((function(e){return console.log(e)})).then((function(e){return t(e)})).then((function(e){return V(e)})),O.a.get("".concat(g,"/list/ethnicity")).then((function(e){return e.data})).catch((function(e){return console.log(e)})).then((function(e){return t(e)})).then((function(e){return $(e)}))]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=Object(c.useState)([]),ne=Object(j.a)(te,2),ce=ne[0],re=ne[1];return Object(p.jsx)(m.Provider,{value:{page:a,setPage:i,length:b,setLength:h,order_column:f,setOrder_column:v,order_desc:P,setOrder_desc:k,totalLength:w,setTotalLength:I,newLength:F,setNewLength:N,shownPagination:T,setShownPagination:Y,filters:B,setFilters:J,genders:z,races:U,ethnicities:Z,toggledPatient:ce,setToggledPatient:re},children:t})},y=function(e){var t=e.callGetPatientListAPI,n=Object(c.useContext)(m),r=n.page,a=n.length,i=n.setLength,s=n.order_column,l=n.order_desc,o=n.totalLength,u=n.newLength,j=n.setNewLength,b=n.shownPagination,h=n.setShownPagination,d=n.filters,O=n.setToggledPatient;return Object(p.jsxs)("div",{className:"pagination",children:[Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target[0].value;n=n&&"0"!==n?parseInt(n):a,i(n),t(n,1,s,l,d),h(0),O([])},children:[Object(p.jsx)("input",{type:"text",onChange:function(e){return j(Math.min(e.target.value.replace(/[^0-9]/g,""),o))},value:u}),Object(p.jsxs)("span",{style:{margin:"0px 10px"},children:[" / ",o]}),Object(p.jsx)("button",{type:"submit",children:"\ubcc0\uacbd"})]}),Object(p.jsx)("ul",{children:function(){var e=[],n=Math.ceil(o/a);0!==b&&e.push(Object(p.jsx)("li",{onClick:function(){h(b-10),t(a,b-9,s,l,d),O([])},children:"\u3008"},"prev"));for(var c=function(n){e.push(Object(p.jsx)("li",{onClick:function(){r!==n+1&&(t(a,n+1,s,l,d),O([]))},style:{cursor:n+1===r?"inherit":"pointer",backgroundColor:n+1===r?"black":"inherit",color:n+1===r?"white":"black",borderRadius:n+1===r?"2rem":"none"},children:n+1},n+1))},i=b;i<Math.min(b+10,n);i++)c(i);return b+10<n&&e.push(Object(p.jsx)("li",{onClick:function(){h(b+10),t(a,b+11,s,l,d),O([])},children:"\u3009"},"next")),e}()})]})},S=function(e){var t=e.callGetPatientListAPI,n=e.columnArr,r=Object(c.useContext)(m),a=r.setOrder_column,i=r.setOrder_desc,s=r.setShownPagination,l=r.filters,o=r.length,u=r.order_column,j=r.order_desc,b=r.setToggledPatient,h=function(e,n){a(e),i(n),t(o,1,e,n,l),s(0),b([])};return Object(p.jsx)(p.Fragment,{children:n.map((function(e){return Object(p.jsxs)("th",{children:[Object(p.jsx)("span",{onClick:function(){return h(e,!0)},children:u===e&&!0===j?"\u25bc":"\u25bd"}),Object(p.jsx)("span",{onClick:function(){return h(e,!1)},children:u===e&&!1===j?"\u25b2":"\u25b3"})]},e)}))})},P=n(12),k=n(8),_=function(e){var t=e.category,n=e.list,c=e.handleFilters;return Object(p.jsx)("form",{onChange:function(e){return c(e.target.value,t)},children:n&&n.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"radio",value:e.value,id:e.value,name:t}),Object(p.jsx)("label",{htmlFor:e.value,children:e.value})]},e.key)}))})},C=function(e){var t=e.category,n=e.list,r=e.handleFilters,a=Object(c.useState)([]),i=Object(j.a)(a,2),l=i[0],o=i[1],u=function(e){var n=l.indexOf(e),c=Object(s.a)(l);-1===n?c.push(e):c.splice(n,1),o(c),r(c,t)};return Object(p.jsx)("form",{children:n&&n.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",value:e.value,id:e.value,onChange:function(){return u(e.value)}}),Object(p.jsx)("label",{htmlFor:e.value,children:e.value})]},e.key)}))})},w=function(){var e=Object(c.useContext)(m),t=e.filters,n=e.setFilters;return Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=parseInt(e.target[0].value),r=parseInt(e.target[1].value);n(Object(k.a)(Object(k.a)({},t),{},{age_min:c,age_max:r}))},className:"age-filter",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"min-age",children:"min"}),Object(p.jsx)("input",{type:"text",id:"min-age"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"max-age",children:"max"}),Object(p.jsx)("input",{type:"text",id:"max-age"})]}),Object(p.jsx)("button",{children:"\uac80\uc0c9"})]})},I=function(){var e=Object(c.useContext)(m),t=e.filters,n=e.setFilters,r=e.genders,a=e.races,i=e.ethnicities,s=function(e,c){n(Object(k.a)(Object(k.a)({},t),{},Object(P.a)({},c,e)))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("th",{children:Object(p.jsx)(w,{})}),Object(p.jsx)("th",{}),Object(p.jsx)("th",{children:Object(p.jsx)(_,{category:"gender",list:r,handleFilters:s})}),Object(p.jsx)("th",{children:Object(p.jsx)(_,{category:"ethnicity",list:i,handleFilters:s})}),Object(p.jsx)("th",{children:Object(p.jsx)(C,{category:"race",list:a,handleFilters:s})}),Object(p.jsx)("th",{children:Object(p.jsx)(_,{category:"death",list:[{key:1,value:"Y"},{key:2,value:"N"}],handleFilters:s})})]})},L=function(e){var t=e.personID,n=e.toggle,r=Object(c.useState)(null),a=Object(j.a)(r,2),i=a[0],s=a[1],l=Object(c.useState)(null),b=Object(j.a)(l,2),h=b[0],d=b[1],O=Object(c.useState)(!1),g=Object(j.a)(O,2),x=g[0],m=g[1],v=Object(c.useCallback)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t).then((function(e){s(e.conditionList),d(e.visitCount)}));case 2:case"end":return e.stop()}}),e)}))),[t]);return Object(c.useEffect)((function(){n&&!x&&m(!0),n&&x&&v()}),[v,x,n]),Object(p.jsx)("tr",{id:t,style:{display:"none"},children:Object(p.jsxs)("td",{colSpan:8,className:"patient-brief",children:[Object(p.jsx)("p",{children:Object(p.jsxs)("b",{children:["visit count : ",h]})}),i&&i.map((function(e,t){return Object(p.jsx)("p",{children:e},t)}))]})})},D=function(){var e=Object(c.useContext)(m),t=e.setPage,n=e.length,a=e.order_column,i=e.order_desc,l=e.setTotalLength,b=e.setShownPagination,d=e.filters,O=e.toggledPatient,g=e.setToggledPatient,f=Object(c.useState)(!1),v=Object(j.a)(f,2),P=v[0],k=v[1],_=Object(c.useState)(!1),C=Object(j.a)(_,2),w=C[0],D=C[1],F=Object(c.useState)(null),N=Object(j.a)(F,2),A=N[0],E=N[1],T=Object(c.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(n,c,r,a,i){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(n,c,r,a,i);case 2:(s=e.sent)&&Promise.all([E(s.patients),l(s.totalLength),t(s.page)]);case 4:case"end":return e.stop()}}),e)})));return function(t,n,c,r,a){return e.apply(this,arguments)}}(),[t,l]);Object(c.useEffect)((function(){T(n,1,a,i,d),b(0),g([])}),[T,d,n,a,i,b,g]);var Y=["personID","age","birthDatetime","gender","ethnicity","race","isDeath"];return A?Object(p.jsxs)("div",{className:"table-container",children:[Object(p.jsxs)("div",{className:"button-container",children:[Object(p.jsx)("button",{onClick:function(){return k(!P)},children:"\uc815\ub82c"}),Object(p.jsx)("button",{onClick:function(){return D(!w)},children:"\ud544\ud130"})]}),Object(p.jsxs)("table",{children:[Object(p.jsxs)("thead",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"No."}),Y.map((function(e){return Object(p.jsx)("th",{className:e,children:e},e)}))]}),P&&Object(p.jsxs)("tr",{className:"sorting",children:[Object(p.jsx)("th",{}),Object(p.jsx)(S,{callGetPatientListAPI:T,columnArr:Y})]}),w&&Object(p.jsxs)("tr",{className:"filtering",children:[Object(p.jsx)("th",{}),Object(p.jsx)("th",{}),Object(p.jsx)(I,{})]})]}),Object(p.jsx)("tbody",{children:A&&A.map((function(e,t){return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsxs)("tr",{onClick:function(){return function(e){O.includes(e)||g([].concat(Object(s.a)(O),[e]));var t=document.getElementById(e).style.display;document.getElementById(e).style.display="none"===t?"table-row":"none"}(e.personID)},children:[Object(p.jsx)("td",{children:t+1}),Object(p.jsx)("td",{children:e.personID}),Object(p.jsx)("td",{children:e.age}),Object(p.jsx)("td",{children:h()(e.birthDatetime).format("YYYY-MM-DD")}),Object(p.jsx)("td",{children:e.gender}),Object(p.jsx)("td",{children:e.ethnicity}),Object(p.jsx)("td",{children:e.race}),Object(p.jsx)("td",{children:e.isDeath?"Y":"N"})]}),Object(p.jsx)(L,{personID:e.personID,toggle:O.includes(e.personID)&&!0})]},e.personID)}))})]}),Object(p.jsx)(y,{callGetPatientListAPI:T})]}):"Loading..."};i.a.render(Object(p.jsx)(v,{children:Object(p.jsx)(D,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.d9fd4ad1.chunk.js.map